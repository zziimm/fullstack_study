Auth(인증)을 통해 서비스는 유저를 검증할 수 있음

- 쿠키(Cookie)
- 세션(Session)
- 토큰(Token)
- JWT(Json Web Token)

1. 쿠키
쿠키를 이용해서 서버는 브라우저에 데이터를 저장할 수 있음
쉽게 브라우저에 저장할 수 있는 문자열(key=value)
(유저에 관한 것을 기억하기 위해 - 예: 로그인 시 아이디 기억하기)

사이트에 방문(예: 네이버 메인) -> 브라우저는 서버에 요청 -> 서버는 이에 응답
이 때 응답에는 여러 데이터와 요청한 페이지 정보가 있는데
여기에 브라우저에 저장하고자 하는 쿠키가 있을 수 있음

브라우저에 쿠키를 저장한 후 해당 웹사이트 방문할 때마다
해당 쿠키도 요청과 함께 보냄
참고로 쿠키는 도메인(예: naver.com)에 따라 제한됨
네이버 서버가 준 쿠키는 네이버 서버에만 보내짐

쿠키는 유효기간이 존재
1시간, 하루, 혹은 한달 등 서버가 정한 기간에 따라 유효함

쿠키는 인증 뿐만 아니라 여러가지 정보를 저장할 수 있음
예를 들어 웹사이트 언어설정을 바꾸면 서버는 유저가 선택한 언어를 기억하려고 쿠키로 저장
이후에 유저가 해당 웹사이트를 방문하면 쿠키는 요청과 함께 서버로 보내지고
덕분에 서버는 쿠키가 저장해둔 언어설정의 페이지를 제공

2. 왜 세션과 토큰이 필요할까?
웹사이트 이용할 때 쓰는 HTTP 프로토콜은 'Stateless' 임
Stateless란? 서버로 가는 모든 요청이 이전 요청과 독립적으로 다뤄진다는 뜻
요청끼리는 서로 연결이 없음(어딘가 저장되지도 않음)
그래서 요청이 끝나면 서버는 우리가 누군지 잊어버림
그렇기 때문에 요청할 때마다 누군지 알려줘야하는데
이를 구현하는 방법 중 하나가 세션임

3. 세션
'goni'라는 유저가 로그인을 하고 싶다면
1) 아이디, 비밀번호를 서버에 보냄
2) 아이디가 존재하고 비번이 맞다면 서버는 세션 DB에 'goni'라는 유저를 생성
해당 세션에는 별도의 ID가 있음(=세션 ID)
3) 세션 ID는 쿠키를 통해 브라우저에 저장됨
4) 따라서 같은 웹사이트의 다른 페이지로 이동하면
브라우저는 세션 ID를 갖고있는 쿠키를 서버에 보낼거임
5) 그러면 서버는 세션 ID와 함께 오는 쿠키를 확인
해당 세션 ID를 갖고 세션 DB를 확인하고 'goni' 라는 것을 알게됨!
해당 요청이 끝나고 또 다른 페이지로 이동하면 4~5번 프로세스가 반복됨

중요한 유저 정보는 모두 서버에 있음
클라이언트(브라우저)가 갖고있는 것은 세션 ID뿐
(여기서 쿠키는 세션 ID를 전달하기 위한 매개체 역할)

근데 네이티브 앱(iOS, Andriod)에서는 쿠키를 못씀(브라우저에만 존재)
이 때는 토큰을 사용

4. 토큰
토큰은 그냥 이상하게 생긴 문자열임
해당 토큰을 서버에 보내고 서버는 세션 DB에서 해당 토큰과 일치하는 유저를 찾음