<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <script>
    // 함수
    // 여러 실행 코드들의 묶음(그룹화)
    // 자주 사용하는 코드들(기능)을 저장했다가 필요할 때 호출해서 사용
    // function 키워드를 사용하여 정의 => ES6차에서는 화살표 함수를 사용

    // 1. 함수 선언문: 기명 함수로 정의
    // function 함수명() {
    //   실행코드
    // }

    // 2. 함수 표현식: 익명 함수를 변수에 할당
    // 변수 = function () {
    //   실행코드;
    // };

    // 위와 같이 정의된 함수는 즉시 실행되지 않음
    // 메모리에 할당되어 있다가 함수가 호출되면 실행
    // 1. 함수명();
    // 2. 변수명();

    function greeting() {
      document.write('hello<br>');
    };
    greeting();

    // (참고)(고급) 함수 선언문과 함수 표현식의 차이점
    // 함수 선언문은 호이스팅(끌어 올리기)이 일어난다.
    // 해당 스코프(유효범위)의 최상단으로 끌어올려진 것과 같은 현상
    // 변수나 함수 선인이 코드 실행보다 먼저 메모리에 할당(저장)되는 과정
    let count = 0;

    myFunc();

    function myFunc() {
      count++;
      document.write('hello ' + count, '<br>');
    }

    myFunc();

    // theFunc(); // Cannot access 'theFunc' before initialization

    const theFunc = function () {
      count++;
      document.write('bye ' + count, '<br>');
    }

    theFunc();

    // 버튼 클릭할 때 마다 배경색이 바뀌도록 함수 만들기
    const color = ['yellow', 'aqua', 'purple', 'white'];

    let index = 0;
    function changeColor() {
      if (index >= color.length) {
        index = 0;
      }
      const bodyTag = document.querySelector('body');
      bodyTag.style.backgroundColor = color[index++]; // 후위 증가!!
    }

    // 매개변수가 있는 함수
    // function 함수명(매개변수1, 매개변수2, ...) {
    //   실행코드;
    // };
    // 함수명(인자값1, 인자값2, ...); // 인자값1 -> 매개변수1, 인자값2 -> 매개변수2

    function introduce(name, age) { // 외부에서 받을 데이터가 있으면 매개변수 선언
      document.write('안녕하세요. ' + name + '입니다.<br>');
      document.write('나이는 ' + age + '세 입니다.<br>');
    }
    introduce('지민', 156); // 인자값(인수, 매개값)을 넘겨줌
    introduce('지민');
    introduce('지민', 22, '무의미한 데이터');

    // 로그인 함수 만들기 실습
    const dbId = 'zim';
    const dbPw = '1234';

    let msgId = '존재하지 않는 아이디입니다.';
    let msgPw = '잘못된 비밀번호입니다.';
    // 잘못된 id 입력: alert('존재하지 않는 아이디입니다.');
    // 잘못된 pw 입력: alert('잘못된 비밀번호입니다.');
    // 로그인 성공 시: document.write(id + '님 방문을 환영합니다!');
    function login(userId, userPw) {
      if (userId !== dbId) {
        alert(msgId);
      } else if (userPw !== dbPw) {
        alert(msgPw);
      } else {
        document.write(dbId + '님 방문을 환영합니다!');
      }
    }
    
    const userId = prompt('아이디?');
    const userPw = prompt('비밀번호?');
    login(userId, userPw);

    // 함수에서 return문의 역할
    // 데이터(결과값)를 반환
    // 함수를 강제 종료
    // function 함수명() {
    //   실행코드;
    //   return 값;(함수를 호출한 쪽으로 값을 반환함)

    //   실행코드2; (실행X)
    // }
    function sum(num1, num2) {
      return num1 + num2;
    }
    const result = sum(10, 20); // 30;
    document.write('두 수의 합은 ' + result, '<br>');

    // 두 과목의 점수를 입력받아 평균 점수 구하기
    const arrSubject = ['국어', '수학', '영어'];

    function testAvg(arrData) {
      let sum = 0;
      for (let i = 0; i < arrData.length; i++) {
        sum += Number(prompt(arrData[i] + ' 점수는?', '0'));
      }

      return sum / arrData.length;
    }
    const resultAvg = testAvg(arrSubject);
    document.write('평균 점수는 ' + resultAvg, '<br>')

    // 이전/다음 버튼으로 이미지 넘기기
    let imgNum = 1;

    // 이미지 순환식
    // function gallery(direct) {
    //   if (direct > 0) { // 다음
    //     imgNum++;
    //     if (imgNum > 8) {
    //       imgNum = 1;
    //     }
    //   } else { // 이전
    //     imgNum--;
    //     if (imgNum < 1) {
    //       imgNum = 8;
    //     }
    //   }


    // 이미지 1, 8 순환 종료 if문 함수종료 = return;
    function gallery(direct) {
      if (direct > 0) { // 다음
        if (imgNum === 8) {
          return;
        }
        imgNum++;
      } else { // 이전
        if (imgNum === 1) {
          return;
        }
        imgNum--;
      }

      const imgTag = document.querySelector('.photo');
      imgTag.setAttribute('src', `images/pic_${imgNum}.jpg`); // 어떤속성으로 바꿀지, 무슨값으로 바꿀지
    }


    // 전역 변수와 지역 변수
    const globalNum = 50; // 전역 변수
    function testVarScope() {
      const localNum = 200; // 지역 변수
      document.write('함수 안: ' + globalNum, '<br>')
      document.write('함수 안: ' + localNum, '<br>')
    }
    
    testVarScope();
    document.write('함수 밖: ' + globalNum, '<br>')
    // document.write('함수 밖: ' + localNum, '<br>') // 에러

    // 외부(전역) 함수와 내부(지역) 함수
    function outerFunc() { // 외부 함수
      function innerFunc() { // 내부 함수
        document.write('내부 함수<br>');
      }

      innerFunc();
    }

    outerFunc();
    // innerFunc(); // 에러

    // 전역과 지역을 나누는 이유?
    // 변수명 충돌을 피하기 위해
    // 해당 데이터가 전체에서 쓰인다면 전역 변수로, 함수 내 또는 제어문 내에서만 쓰이면 지역 변수로 선언
    // 지역 변수의 예: for문의 초기화식
    for (let i = 0; i < 1; i++) {
      
    }
    for (let i = 0; i < 1; i++) {

    }

    // 내장 함수
    // 자바스크립트 엔진에 내장되어 바로 호출 가능한 함수

    // 문자열 데이터를 정수형 데이터로 반환
    console.log(parseInt('10.33')); // 10
    console.log(parseInt('15.5px')); // 15
    console.log(parseInt('a40')); // NaN
    console.log(parseInt(true)); // NaN

    // 문자열 데이터를 실수형 데이터로 반환
    console.log(parseFloat('10.33')); // 10.33
    console.log(parseFloat('15.5px')); // 15.5
    console.log(parseFloat('a40')); // NaN
    console.log(parseFloat(true)); // NaN
    
    // 문자형 데이터로 반환
    console.log(String(5)); // '5'
    console.log(String([1, 2, 3, 4])); // '1,2,3,4'
    console.log(String(new Date())); // Sat Jan 07 2023 19:12:03 GMT+0900 (한국 표준시)

    // 숫자형 데이터로 반환(숫자형으로 바꿀수 없으면 NaN을 반환)
    console.log(Number('5')); // 5
    console.log(Number(true)); // 1
    console.log(Number(false)); // 0
    console.log(Number('abc')); // NaN

    // 논리형 데이터로 반환
    // false 값들: false, 0(-0), ''(""), undefined, null, NaN
    console.log(Boolean(5)); // true
    console.log(Boolean(null)); // false
    console.log(Boolean(10 > 9)); // true

    // NaN(Not-a-Number) 값이면 true를 반환
    console.log(isNaN(5)); // false
    console.log(isNaN(5 - 2)); //false
    console.log(isNaN('123')); // false, 테스트하기 전에 값을 숫자로 변환
    console.log(isNaN('Hello')); // true
    

    
  </script>
</head>
<body>
  <button type="button" onclick="changeColor()">배경색 바꾸기</button>

  <div>
    <p>
      <button type="button" onclick="gallery(0)">이전</button>
      <button type="button" onclick="gallery(1)">다음</button>
    </p>
    <p>
      <img src="images/pic_1.jpg" alt="p" class="photo">
    </p>
  </div>
</body>
</html>